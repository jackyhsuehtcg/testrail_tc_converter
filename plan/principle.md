# 開發通則 (Development Principles)

本文件定義了 TestRail 測試案例轉換器專案的開發通則，每個實作階段都必須嚴格依循這個文件所規定的事項，開發前一定要先查閱。

## 1. 測試優先原則

**每個 task 都必須撰寫單元測試，並自主測試通過之後才能往下一個階段前進**

- 採用 TDD 開發原則
- 撰寫對應的單元測試案例
- 確保所有測試通過後才能進行下一階段
- 測試需涵蓋正常流程、邊界條件、異常處理
- 測試檔案統一放置在 `tests/` 目錄下

## 2. 中文開發原則

**所有開發中對話、文件撰寫以及錯誤訊息都使用中文**

- 開發過程中的所有對話使用中文
- 程式碼註解使用中文
- 文件撰寫使用中文
- 錯誤訊息和使用者介面訊息使用中文
- 變數名稱、函數名稱可使用英文（符合程式慣例）

## 3. 授權開發原則

**沒有規範在 requirement/spec 裡面的事項，要實作之前一律獲得我的同意再執行**

- 未明確定義的功能不得擅自實作
- 任何規格外的變更需事先討論確認
- 技術選擇和架構調整需說明理由並獲得同意
- 保持與原始需求的一致性

## 4. 階段性開發控制

**每個階段完成後，除非獲得明確授權進行下一個項目，絕對不可以擅自進行**

- 完成當前階段的所有交付物
- 確認階段成果符合驗收標準
- 等待明確授權後才能開始下一階段
- 階段間依賴關係需清楚定義

## 5. 文件化要求

**所有元件的接口、必要參數、呼叫方式都必須詳細記錄在文件裡面，進行 task 實作前一定要參閱**

- 詳細記錄所有元件接口以及必要參數到 parameters.md
- 明確說明必要參數和可選參數，必須最大程度避免執行階段才發現引用錯誤！
- 提供呼叫方式範例
- 實作前必須參閱
- 文件需與程式碼同步更新

## 6. Git 版本控制管理

**專案採用 git 管理，不在主線 main 開發，任何新功能都必須起支線開發**

- 主分支 (main) 保持穩定狀態
- 所有新功能使用 feature 分支開發
- 重構使用 refactor 分支開發
- 提交訊息使用中文並清楚描述功能
- 合併前確保所有測試通過

## 7. 檔案清理管理

**所有臨時跟測試檔案都集中管理，並在測試跟臨時用途後清除，不列入 git 管理**

- 臨時檔案統一放置在 `temp/` 目錄下
- 測試產生的檔案放置在 `test_output/` 目錄下
- 使用完畢後立即清理臨時檔案
- 在 `.gitignore` 中排除臨時檔案目錄
- 定期檢查並清理不必要的檔案

## 8. 敏感資訊安全管理

**所有包含敏感資訊的設定檔（app token, secret, email...）都不列入 git 管理**

- API Token 使用環境變數或獨立設定檔
- 敏感設定檔加入 `.gitignore`
- 提供設定檔範本 (`config.yaml.example`)
- 文件中說明敏感資訊的設定方法
- 日誌檔案不得記錄敏感資訊

## 9. 專案結構管理

**所有 planning 文件都應該放在 plan/ 目錄下，保持專案結構整齊**

- 需求規格、架構設計等規劃文件統一放置在 `plan/` 目錄
- 保持專案根目錄的簡潔性
- 依照文件類型進行適當的子目錄分類
- 文件名稱使用清楚的命名規則

## 10. 任務管理原則

**拆分的細項 task 文件取名為 task.md，在裡面各項目需要加入 checkbox 以標示該 task 是否已經完成**

- 任務拆解文件統一命名為 `task.md`
- 每個任務項目使用 `- [ ]` 或 `- [x]` 格式標示完成狀態
- 任務狀態需要即時更新，反映真實進度
- 任務描述需要清楚具體，包含交付標准

**各 task 完成之後需通過 unit test，才算是完成該項目**

- 每個 task 必須包含對應的單元測試
- 所有單元測試必須通過才能標記任務為完成
- 測試覆蓋率需達到合理標準
- 測試需包含正常流程、邊界條件、異常處理

## 11. 開發環境管理

**使用 pyenv 管理 Python 版本，統一使用 robotdev 虛擬環境**

- 專案統一使用 pyenv 進行 Python 版本管理
- 所有開發和測試都在 robotdev 虛擬環境下進行
- 測試執行命令格式：`pyenv exec python -m pytest tests/unit/test_xxx.py -v`
- 確保環境一致性，避免依賴衝突
- 新增依賴時需更新 requirements.txt 檔案

## 12. 模組分離原則

**各功能模組只負責最小跟核心部分，邏輯交給主程式**

- 模組功能最核心跟精簡化，避免過度耦合
- 邏輯部分由主程式部分做協調
- 在不影響前面原則的狀況下，可作適當的整合

---

**重要提醒**：
- 開發前務必完整閱讀本文件
- 有任何疑問需立即提出討論
- 嚴格遵守這些原則以確保專案品質與安全性
- 違反原則可能導致開發流程中斷